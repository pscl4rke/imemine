#!/usr/bin/env bash
# Generate a self-signed SSL certificate (and key).
[ -z "$1" ] && echo "Usage: $0 the.common.name [bits]" >&2 && exit 1
commonname="$1"
bits="$2"
[ -z "$bits" ] && echo Assuming 4096 bits >&2 && bits=4096
openssl req \
    -x509 -nodes \
    -days 3650 \
    -newkey rsa:$bits \
    -subj /CN=$commonname \
    -keyout $commonname.key \
    -out $commonname.crt
