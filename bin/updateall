#!/usr/bin/env bash
#======================================================================#
# REPOSITORY 'MIRROR' UPDATOR                    (c) 2012 P. S. Clarke #
#======================================================================#

for directory in $(ls)
do

    if [ -d "./$directory/.git" ]
    then
        echo "Updating Git Repository: $directory..."
        cd "$directory"
        git pull
        cd ..
        echo "DONE."
        echo
    fi

    if [ -d "./$directory/objects" ]
    then
        echo "Updating Bare Git Repository: $directory..."
        cd "$directory"
        #git fetch --verbose --all
        git fetch --all
        cd ..
        echo "DONE."
        echo
    fi

    if [ -d "./$directory/.hg" ]
    then
        echo "Updating Mercurial Repository: $directory..."
        cd "$directory"
        hg pull
        cd ..
        echo "DONE."
        echo
    fi

done

