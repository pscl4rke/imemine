#!/usr/bin/python2
#======================================================================#
# PP PRINTING PROMPT FOR PS DOCUMENTS            (c) 2016 P. S. Clarke #
#======================================================================#


import subprocess
import sys
import tempfile


def main():
    with tempfile.NamedTemporaryFile(suffix=".ps") as psfile:
        for line in sys.stdin:
            psfile.write(line)
        psfile.flush()
        print "I've saved that into %r" % psfile.name
        while True:
            print "  1p    Print one page per side"
            print "  q     Quit"
            command = open("/dev/tty").readline().strip()
            if command == "1p":
                subprocess.check_call(["lp", psfile.name])
            elif command == "q":
                break
            else:
                print "Huh? %r" % command


if __name__ == '__main__':
    main()
