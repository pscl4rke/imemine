#!/usr/bin/env bash
#======================================================================#
# WEB-BROWSING LAUNCH WRAPPER               (c) 2012-2014 P. S. Clarke #
#======================================================================#

case "$1" in
    PRIMARY)
        url="$(xclip -o -selection primary)"
        ;;
    CLIPBOARD)
        url="$(xclip -o -selection clipboard)"
        ;;
    PROMPT)
        url="$(zenity --entry --text="URL" --title="URL")"
        ;;
    *)
        url="$1"
        ;;
esac

browser="chrome"
case "$browser" in
    chrome)
        # --temp-profile must be first if it is to be obeyed:
        chromium-browser --temp-profile --no-first-run "$url"
        ;;
    firefox)
        profilepath="$(mktemp --directory /tmp/firefox.$$.XXXXXXX)"
        firefox -no-remote -profile "$profilepath" "$url"
        rm -r "$profilepath"
        ;;
esac

